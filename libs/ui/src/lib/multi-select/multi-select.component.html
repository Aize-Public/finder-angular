<div class="multi-select" (click)="isDropdownOpen = !isDropdownOpen" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
    <div class="selected-tags-container" #tagsContainer>
        <p>{{label}}:</p>
        <div class="selected-tags" [class.overflowed]="selectedItems.length > maxVisibleTags">
            <ng-container *ngFor="let selectedItem of visibleItems; let last = last">
                <div class="tag">
                    <p>{{ selectedItem }}</p>
                </div>
                <span *ngIf="last && selectedItems.length > maxVisibleTags" class="overflow-count">
                    +{{ selectedItems.length - maxVisibleTags }}
                </span>
            </ng-container>
        </div>
    </div>
</div>


<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="isDropdownOpen"
    cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayScrollStrategy]="scrollStrategy"
    cdkConnectedOverlayBackdropClass="overlay-backdrop"
    cdkConnectedOverlayHasBackdrop (backdropClick)="isDropdownOpen = false">
    <div class="overlay">
        <label *ngFor="let value of values">
            <input type="checkbox" [checked]="selectedItems.includes(value)" (change)="toggleSelection(value)" />
            {{ value }}
        </label>
    </div>
</ng-template>